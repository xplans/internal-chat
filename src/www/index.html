<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>发个东西 - 局域网文字/文件P2P传输工具</title>
  <script src="./xchatuser.js?v=20"></script>
  <link rel="stylesheet" href="./style.css?v=20">
  <link rel="stylesheet" href="./style_expand.css?v=20">
</head>
<body>
  <div class="dragtip">
    <h1>松开发送文件</h1>
  </div>
  <div class="left">
    <div class="chat-wrapper">
    </div>
    <div class="toolbar">
      <div class="toolbar-left">
        <button class="toolbar-btn nickname-btn" title="设置昵称">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
        </button>
        <button class="toolbar-btn file-btn" title="发送文件">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
          </svg>
        </button>
        <button id="room-btn" class="toolbar-btn room-btn" title="进入房间">
          <svg t="1745220457878" id="room-icon" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23784" width="20" height="20">
            <path d="M992.088 332.8l-448-281.6c-19.2-12.8-44.8-12.8-64 0l-448 281.6c-57.6 32-32 115.2 32 115.2h896c64 0 89.6-83.2 32-115.2z" p-id="23785" fill="#ffffff"></path>
            <path d="M128.088 441.6V928c0 32 25.6 51.2 51.2 51.2h652.8c32 0 51.2-25.6 51.2-51.2V441.6h-755.2z m499.2 492.8h-236.8V704c0-64 51.2-115.2 115.2-115.2s121.6 51.2 121.6 115.2v230.4z" p-id="23786" fill="#ffffff"></path>
          </svg>
        </button>
      </div>
      <div class="toolbar-right">
        <button class="toolbar-btn toggle-users-btn mobile-only" title="切换在线用户列表">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M16,13C15.71,13 15.38,13 15.03,13.05C16.19,13.89 17,15 17,16.5V19H23V16.5C23,14.17 18.33,13 16,13M8,13C5.67,13 1,14.17 1,16.5V19H15V16.5C15,14.17 10.33,13 8,13M8,11A3,3 0 0,0 11,8A3,3 0 0,0 8,5A3,3 0 0,0 5,8A3,3 0 0,0 8,11M16,11A3,3 0 0,0 19,8A3,3 0 0,0 16,5A3,3 0 0,0 13,8A3,3 0 0,0 16,11Z"/>
          </svg>
        </button>
        <button class="toolbar-btn send-btn" title="发送消息">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
    </div>
    <textarea id="messageInput" class="txt-msg" onkeydown="enterTxt(event)"></textarea>
  </div>
  <div class="right">
    <ul id="users">
    </ul>
  </div>

  <div class="mobile-overlay"></div>

  <div class="modal" id="userSelectModal">
    <div class="modal-content">
      <h3>选择接收用户</h3>
      <div class="user-list" id="userSelectList">
      </div>
      <div class="progress-container" style="display: none;">
        <div class="progress-text">正在发送...</div>
        <div class="progress-bar">
          <div class="progress-bar-inner"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button onclick="cancelSendFile()">取消</button>
        <button onclick="confirmSendFile()">发送</button>
      </div>
    </div>
  </div>

  <div class="modal" id="nicknameModal">
    <div class="modal-content">
      <h3>设置昵称</h3>
      <div class="nickname-input-container">
        <input type="text" id="nicknameInput" maxlength="10" placeholder="请输入昵称（最多10个字符）">
      </div>
      <div class="modal-footer">
        <button onclick="closeNicknameModal()">取消</button>
        <button onclick="saveNickname()">保存</button>
      </div>
    </div>
  </div>

  <div class="modal" id="roomModal" style="display: none;">
    <div id="checkInRoom" class="modal-content">
      <div class="room-title">
        <h3>进入房间</h3>
        <svg id="connecting" style="display: none;" t="1745226280114" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="63432" width="20" height="20">
          <path d="M112 912m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z" p-id="63433" fill="#64b5f6"></path>
          <path d="M1024 912v64c0 26.5-21.5 48-48 48s-48-21.5-48-48v-64c0-110.2-21.6-217.1-64.1-317.6-20.4-48.3-45.7-95-75.2-138.6C759.5 412.6 726 372 689 335s-77.6-70.5-120.8-99.7c-43.6-29.5-90.2-54.8-138.6-75.2C329.1 117.6 222.2 96 112 96H48C21.5 96 0 74.5 0 48S21.5 0 48 0h64c503.7 0 912 408.3 912 912z" p-id="63434" fill="#ffffff"></path>
          <path d="M784 912v64c0 26.5-21.5 48-48 48s-48-21.5-48-48v-64c0-77.8-15.2-153.2-45.2-224.2-14.4-34.1-32.3-67-53.1-97.8-20.6-30.5-44.3-59.2-70.4-85.3-26.1-26.1-54.8-49.8-85.3-70.4-30.8-20.8-63.7-38.7-97.8-53.1-71-30-146.4-45.2-224.2-45.2H48c-26.5 0-48-21.5-48-48s21.5-48 48-48h64c371.1 0 672 300.9 672 672z" p-id="63435" fill="#64b5f6"></path>
          <path d="M512 912v64c0 26.5-21.5 48-48 48s-48-21.5-48-48v-64c0-41.1-8-80.9-23.8-118.3-15.4-36.2-37.3-68.7-65.2-96.7-28-28-60.5-49.9-96.7-65.2C192.9 616 153.1 608 112 608H48c-26.5 0-48-21.5-48-48s21.5-48 48-48h64c220.9 0 400 179.1 400 400z" p-id="63436" fill="#64b5f6"></path>
        </svg>
      </div>
      <div class="nickname-input-container">
        <input type="text" id="roomIdInput" maxlength="10" placeholder="请输入房间名（最多10个字符）">
      </div>
      <div class="nickname-input-container">
        <input type="password" id="roomPwdInput" maxlength="10" placeholder="请输入房间密码">
      </div>
      <div class="modal-footer">
        <button onclick="closeRoomModal()">取消</button>
        <button onclick="enterRoom()">进入</button>
      </div>
    </div>
  </div>

  <div class="modal" id="passwordModal">
    <div class="modal-content">
      <h3>请输入房间密码</h3>
      <div class="nickname-input-container">
        <input type="password" id="roomPasswordInput" placeholder="请输入密码" autocomplete="off" name="password_fake">
      </div>
      <div class="modal-footer">
        <button onclick="submitRoomPassword()">确认</button>
      </div>
    </div>
  </div>
  
  <div class="effect_box">
    <div class="effect_light"></div>
  </div>

  <script src="./index.js?v=20"></script>
</body>
</html>
